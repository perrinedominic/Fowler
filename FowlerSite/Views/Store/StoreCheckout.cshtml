@model IEnumerable<DataAccessLibrary.Models.CartItem>
@{

    ViewBag.Title = "StoreCheckout";
}

<body>

    <!--
        START: Navbar Mobile
    -->
    <div id="nk-nav-mobile" class="nk-navbar nk-navbar-side nk-navbar-right-side nk-navbar-overlay-content d-lg-none">
        <div class="nano">
            <div class="nano-content">
                <a href="index.html" class="nk-nav-logo">
                    <img src="~/assets/images/logo.png" alt="" width="120">
                </a>
                <div class="nk-navbar-mobile-content">
                    <ul class="nk-nav">
                        <!-- Here will be inserted menu from [data-mobile-menu="#nk-nav-mobile"] -->
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- END: Navbar Mobile -->



    <div class="nk-main">

        <!-- START: Breadcrumbs -->
        <div class="container">
            <ul class="nk-breadcrumbs">


                <li><a asp-action="Index">Home</a></li>


                <li><span class="fa fa-angle-right"></span></li>

                <li><a asp-action="Index">Store</a></li>


                <li><span class="fa fa-angle-right"></span></li>

                <li><a asp-action="StoreCart">Cart</a></li>


                <li><span class="fa fa-angle-right"></span></li>

                <li><span>Checkout</span></li>

            </ul>
        </div>
        <div class="nk-gap-1"></div>
        <!-- END: Breadcrumbs -->




        <div class="container">

            <div class="nk-store nk-store-checkout">

                <!-- START: Billing Details -->
                <div class="nk-gap-2"></div>
                <h3 class="nk-decorated-h-2"><span><span class="text-main-1">Billing</span> Details</span></h3>
                <div class="nk-gap"></div>
                @using (Html.BeginForm("ProcessOrder", "Store", FormMethod.Post, new { id = "customer-form" }))
                {
                    <div class="row vertical-gap">
                        <div class="col-lg-6">
                            <div class="row vertical-gap">
                                <div class="col-sm-6">
                                    <label for="fname">First Name <span class="text-main-1">*</span>:</label>
                                    <input type="text" class="form-control required" name="fname" id="fname">
                                </div>
                                <div class="col-sm-6">
                                    <label for="lname">Last Name <span class="text-main-1">*</span>:</label>
                                    <input type="text" class="form-control required" name="lname" id="lname">
                                </div>
                            </div>

                            <div class="nk-gap-1"></div>
                            <label for="company">Company Name:</label>
                            <input type="text" class="form-control" name="company" id="company">

                            <div class="nk-gap-1"></div>
                            <div class="row vertical-gap">
                                <div class="col-sm-6">
                                    <label for="email">Email Address <span class="text-main-1">*</span>:</label>
                                    <input type="email" class="form-control required" name="email" id="email">
                                </div>
                                <div class="col-sm-6">
                                    <label for="phone">Phone <span class="text-main-1">*</span>:</label>
                                    <input type="tel" class="form-control required" name="phone" id="phone">
                                </div>
                            </div>

                            <div class="nk-gap-1"></div>
                            <label for="country-sel">Country <span class="text-main-1">*</span>:</label>
                            <select name="country" class="form-control required" id="country-sel">
                                <option value="">Select a country...</option>
                                <option value="US">'Merica</option>
                                <option value="Other">Not 'Merica</option>

                            </select>
                        </div>
                        <div class="col-lg-6">
                            <label for="address">Address <span class="text-main-1">*</span>:</label>
                            <input type="text" class="form-control required" name="address" id="address">

                            <div class="nk-gap-1"></div>
                            <label for="city">Town / City <span class="text-main-1">*</span>:</label>
                            <input type="text" class="form-control required" name="city" id="city">

                            <div class="nk-gap-1"></div>
                            <div class="row vertical-gap">
                                <div class="col-sm-6">
                                    <label for="state">State<span class="text-main-1">*</span>:</label>
                                    <input type="text" class="form-control required" name="state" id="state">
                                </div>
                                <div class="col-sm-6">
                                    <label for="zip">Postcode / ZIP <span class="text-main-1">*</span>:</label>
                                    <input type="tel" class="form-control required" name="zip" id="zip">
                                </div>
                            </div>

                            <div class="nk-gap-1"></div>
                            <label class="custom-control custom-checkbox">
                                <input type="checkbox" class="custom-control-input">
                                <span class="custom-control-indicator"></span>
                            </label>
                        </div>
                    </div>

                    <div class="nk-gap-3"></div>
                    <h3 class="nk-decorated-h-2"><span><span class="text-main-1">Payment</span> Information</span></h3>
                    <div class="nk-gap"></div>

                    <div class="row vertical-gap">

                        <div class="col-lg-6">
                                <label for="cardnumber">Cardholder Name(As Shown on Card)<span class="text-main-1">*</span>:</label>
                                <input type="text" class="form-control required" name="cardname" id="cardname" />
                            <div class="nk-gap-1"></div>
                                <label for="cardnumber">Credit Card Number<span class="text-main-1">*</span>:</label>
                                <input type="tel" required="required" data-parsley-creditcard="visa, mastercard" class="form-control required" name="cardnumber" id="cardnumber" />
                        </div>
                        <div class="col-lg-6">

                            <div class="col-sm-3">
                                <label for="cardnumber">Card Type<span class="text-main-1">*</span>:</label>
                                <select class="form-control required" required name="cardtype" id="cardtype">
                                    <option>VISA</option>
                                    <option>MasterCard</option>
                                </select>
                            </div>
                            <div class="nk-gap-1"></div>

                            <div class="row vertical-gap">

                                <div class="col-sm-6">
                                    <label for="expdate">Expiration Date (mm/yy)<span class="text-main-1">*</span>:</label>
                                    <input type="tel" data-parsley-cardexpiry="" class="form-control required" name="expdate" id="expdate" />
                                </div>

                                <div class="col-sm-6">
                                    <label for="cvc">CVC Number<span class="text-main-1">*</span>:</label>
                                    <input type="tel" data-parsley-cvv="" class="form-control required" name="cvc" id="cvc" />
                                </div>
                            </div>
                        </div>
                        </div>


                        <script type="text/javascript">
                            $("#custom-form").validate({
                                rules: {
                                    fname: {
                                        required: true,
                                        minlength: 2,
                                        rangelength: [2, 20]
                                    },
                                    lname: {
                                        required: true,
                                        minlength: 2,
                                        rangelength: [2, 20]
                                    },
                                    phone: {
                                        required: true
                                    },
                                    email: {
                                        required: true,
                                        email: true
                                    },
                                    address: {
                                        required: true
                                    },
                                    cardname: {
                                        required: true
                                    },
                                    cardtype: {
                                        required: true
                                    },
                                    cardnumber: {
                                        required: true
                                    },
                                    expdate: {
                                        required: true
                                    },
                                    cvc: {
                                        required: true
                                    }
                                },
                                messages: {
                                    fname: {
                                        required: "A first name must be entered.",
                                        minlength: "A valid name must be submitted"
                                    },
                                    lname: {
                                        required: "A last name must be entered.",
                                        minlength: "A valid name must be submitted"
                                    }
                                }

                            });
                        </script>
                        <!-- END: Billing Details -->
                        <!-- START: Order Products -->
                        <div class="nk-gap-3"></div>
                        <h3 class="nk-decorated-h-2"><span><span class="text-main-1">Your</span> Order</span></h3>
                        <div class="nk-gap"></div>
                        <div class="table-responsive">
                            <table class="nk-table nk-table-sm">
                                <thead class="thead-default">
                                    <tr>
                                        <th class="nk-product-cart-title">Product</th>
                                        <th class="nk-product-cart-total">Quantity</th>
                                        <th class="nk-product-cart-total">Total</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var x in Model)
                                    {
                                        decimal quantity = x.Quantity;
                                        <tr>
                                            <td class="nk-product-cart-title">
                                                @Html.DisplayName(x.Game.Name)
                                            </td>
                                            <td class="nk-product-cart-total">
                                                @Html.DisplayFor(modelItem => x.Quantity)
                                            </td>
                                            <td class="nk-product-cart-total">
                                                @Html.DisplayFor(modelItem => x.Game.Price)
                                            </td>
                                        </tr>
                                    }


                                    <tr class="nk-store-cart-totals-subtotal">
                                        <td></td>
                                        <td class="nk-product-cart-total">
                                            Subtotal
                                        </td>
                                        <td class="nk-product-cart-total">
                                            @{decimal sum = 0;

                                                foreach (var x in Model)
                                                {

                                                    sum += x.Quantity * x.Game.Price;

                                                }
                                                Output.WriteLine(sum);}
                                        </td>
                                    </tr>
                                    <tr class="nk-store-cart-totals-shipping">
                                        <td></td>
                                        <td class="nk-product-cart-total">
                                            Tax
                                        </td>
                                        <td class="nk-product-cart-total">
                                            @{ decimal tax = .055m;
                                                decimal taxTotal = sum * tax;
                                                Output.WriteLine("$" + Math.Round(taxTotal, 2));
                                            }
                                        </td>
                                    </tr>
                                    <tr class="nk-store-cart-totals-total">
                                        <td></td>
                                        <td class="nk-product-cart-total">
                                            Total
                                        </td>
                                        <td class="nk-product-cart-total">
                                            @{
                                                decimal total = sum + taxTotal;
                                                Output.WriteLine("$" + Math.Round(total, 2));
                                            }
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="nk-gap-1"></div>
                        @*<input class="nk-btn nk-btn-rounded nk-btn-color-main-1" type="submit" value="Place Order">*@
                        @*<button class="nk-btn nk-btn-rounded nk-btn-color-main-1" asp-action="PlaceOrder">Place Order</button>*@
                        <input class="nk-btn nk-btn-rounded nk-btn-color-main-1" type="submit" value="Place Order">
                        }
                        <!-- END: Order Products -->


                        <div class="nk-gap-2"></div>
                    </div>
                </div>
        <div class="nk-gap-2"></div>

    </div>




    <!-- START: Page Background -->

    <img class="nk-page-background-top" src="~/assets/images/bg-top-4.png" alt="">

    <!-- END: Page Background -->
    <!-- START: Search Modal -->
    <div class="nk-modal modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-sm" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span class="ion-android-close"></span>
                    </button>

                    <h4 class="mb-0">Search</h4>

                    <div class="nk-gap-1"></div>
                    <form action="#" class="nk-form nk-form-style-1">
                        <input type="text" value="" name="search" class="form-control" placeholder="Type something and press Enter" autofocus>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- END: Search Modal -->
    <!-- START: Login Modal -->
    <div class="nk-modal modal fade" id="modalLogin" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-sm" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span class="ion-android-close"></span>
                    </button>

                    <h4 class="mb-0"><span class="text-main-1">Sign</span> In</h4>

                    <div class="nk-gap-1"></div>
                    <form action="#" class="nk-form text-white">
                        <div class="row vertical-gap">
                            <div class="col-md-6">
                                Use email and password:

                                <div class="nk-gap"></div>
                                <input type="email" value="" name="email" class=" form-control" placeholder="Email">

                                <div class="nk-gap"></div>
                                <input type="password" value="" name="password" class="required form-control" placeholder="Password">
                            </div>
                            <div class="col-md-6">
                                Or social account:

                                <div class="nk-gap"></div>

                                <ul class="nk-social-links-2">
                                    <li><a class="nk-social-facebook" href="#"><span class="fab fa-facebook"></span></a></li>
                                    <li><a class="nk-social-google-plus" href="#"><span class="fab fa-google-plus"></span></a></li>
                                    <li><a class="nk-social-twitter" href="#"><span class="fab fa-twitter"></span></a></li>
                                </ul>
                            </div>
                        </div>

                        <div class="nk-gap-1"></div>
                        <div class="row vertical-gap">
                            <div class="col-md-6">
                                <a href="#" class="nk-btn nk-btn-rounded nk-btn-color-white nk-btn-block">Sign In</a>
                            </div>
                            <div class="col-md-6">
                                <div class="mnt-5">
                                    <small><a href="#">Forgot your password?</a></small>
                                </div>
                                <div class="mnt-5">
                                    <small><a href="#">Not a member? Sign up</a></small>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>



</body>

